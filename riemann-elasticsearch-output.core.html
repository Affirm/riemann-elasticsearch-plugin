<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>riemann-elasticsearch-output.core documentation</title></head><body><div id="header"><h1><a href="index.html">Riemann-elasticsearch-output 0.1.1-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="riemann-elasticsearch-output.core.html"><span>riemann-elasticsearch-output.core</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="riemann-elasticsearch-output.core.html#var-elasticsearch-sync"><span>elasticsearch-sync</span></a></li><li><a href="riemann-elasticsearch-output.core.html#var-logstash-time-index"><span>logstash-time-index</span></a></li><li><a href="riemann-elasticsearch-output.core.html#var-logstash-v1-format"><span>logstash-v1-format</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>riemann-elasticsearch-output.core documentation</h2><pre class="doc"></pre><div class="public" id="var-elasticsearch-sync"><h3>elasticsearch-sync</h3><div class="usage"><code>(elasticsearch-sync {:keys [url index-fn type-fn format-fn es-opts retries retry-interval], :or {type-fn (fn* [p1__318#] (str (:host p1__318#) &quot;-&quot; (:service p1__318#))), index-fn logstash-time-index, format-fn logstash-v1-format, retries 3, retry-interval 1000}})</code></div><pre class="doc">Create a new syncronouos Elasticsearch output stream.

:type-fn - a function which extracts document type from event
:index-fn - a function which returns index name from event
:format-fn - a function which converts an event to document to be indexed. A document is map object.
:url - The ElasticSearch REST API URL
:es-opts - ElasticSearch connection options. Refer to http://reference.clojureelasticsearch.info/clojurewerkz.elastisch.rest.html#var-connect for more info
:retries - the number of retries on retryable errors
:retry-interval - the number of milliseconds to wait before retrying</pre></div><div class="public" id="var-logstash-time-index"><h3>logstash-time-index</h3><div class="usage"><code>(logstash-time-index event)</code><code>(logstash-time-index prefix event)</code></div><pre class="doc">Return a time based index name with optional prefix. Default prefix is 'logstash-'. E.g.:

(logstash-time-index {:time 1423006857023 :host &quot;localhost&quot; :service &quot;app-health&quot; :metric 23}) ==&gt; &quot;logstash-2015.02.03&quot;
(logstash-time-index &quot;riemann_&quot; {:time 1423006857023 :host &quot;localhost&quot; :service &quot;app-health&quot; :metric 23}) ==&gt; &quot;riemann_2015.02.03&quot;</pre></div><div class="public" id="var-logstash-v1-format"><h3>logstash-v1-format</h3><div class="usage"><code>(logstash-v1-format event)</code></div><pre class="doc">Convert an event to a Logstash V1 format compatible document
</pre></div></div></body></html>